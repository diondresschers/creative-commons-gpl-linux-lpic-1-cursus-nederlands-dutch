sic network configuration

    Gewicht: 4
    Beschrijving: Candidates should be able to view, change and verify configuration settings on client hosts.

Onderwerpen:

    Manually and automatically configure network interfaces
    Basic TCP/IP host configuration.

Begrippen en commando's:

    /etc/hostname
    /etc/hosts
    /etc/resolv.conf
    /etc/nsswitch.conf
    ifconfig
    ifup
    ifdown
    route
    ping

---

/etc/hostname

dion@dionysos:~$ cat /etc/hostname
# name of host machine

---

/etc/hosts
# ip address to hostname mapping (other than dns). ('hosts' file in Windows)

dion@dionysos:~$ cat /etc/hosts
192.168.16.130		centos6
127.0.0.1		localhost.localdomain localhost
::1		localhost6.localdomain6 localhost6

---

/etc/resolv.conf
#contains address for DNS servers

dion@dionysos:~$ cat /etc/resolv.conf
# Generated by NetworkManager
domain ict.hva.nl
search ict.hva.nl hva.nl
nameserver 145.92.248.65
nameserver 145.92.248.73
nameserver 145.92.18.2
# NOTE: the libc resolver may not support more than 3 nameservers.
# The nameservers listed below may not be recognized.
nameserver 145.92.33.2

---

/etc/nsswitch.conf
#determines onrder in which system for name resolution (DNS), dus eerst hosts file of eerst DNS server.

# zie onder voor de lijn: "hosts: files dns myhostname"

dion@dionysos:~$ cat /etc/nsswitch.conf
#
# /etc/nsswitch.conf
#
# An example Name Service Switch config file. This file should be
# sorted with the most-used services at the beginning.
#
# The entry '[NOTFOUND=return]' means that the search for an
# entry should stop if the search in the previous entry turned
# up nothing. Note that if the search failed due to some other reason
# (like no NIS server responding) then the search continues with the
# next entry.
#
# Valid entries include:
#
#	nisplus			Use NIS+ (NIS version 3)
#	nis			Use NIS (NIS version 2), also called YP
#	dns			Use DNS (Domain Name Service)
#	files			Use the local files
#	db			Use the local database (.db) files
#	compat			Use NIS on compat mode
#	hesiod			Use Hesiod for user lookups
#	[NOTFOUND=return]	Stop searching if not found so far
#

# To use db, put the "db" in front of "files" for entries you want to be
# looked up first in the databases
#
# Example:
#passwd:    db files nisplus nis
#shadow:    db files nisplus nis
#group:     db files nisplus nis

passwd:     files sss
shadow:     files sss
group:      files sss
#initgroups: files

#hosts:     db files nisplus nis dns
hosts:      files dns myhostname

# Example - obey only what nisplus tells us...
#services:   nisplus [NOTFOUND=return] files
#networks:   nisplus [NOTFOUND=return] files
#protocols:  nisplus [NOTFOUND=return] files
#rpc:        nisplus [NOTFOUND=return] files
#ethers:     nisplus [NOTFOUND=return] files
#netmasks:   nisplus [NOTFOUND=return] files     

bootparams: nisplus [NOTFOUND=return] files

ethers:     files
netmasks:   files
networks:   files
protocols:  files
rpc:        files
services:   files sss

netgroup:   files sss

publickey:  nisplus

automount:  files sss
aliases:    files nisplus

---

Aanpassen van netwerk files:

RedHat:
/etc/sysconfig/network-scripts/ifcfg-eth0 # now enp0s25
AND
/etc/sysconfig/network

dion@dionysos:~$ cat /etc/sysconfig/network
# Created by anaconda

dion@dionysos:~$ cat /etc/sysconfig/network-scripts/ifcfg-enp0s25 
DEVICE=enp0s25
BOOTPROTO=dhcp
IPADDR=192.168.1.43
NETMASK=255.255.255.0
#NETWORK=127.0.0.0
# If you're having problems with gated making 127.0.0.0/8 a martian,
# you can change this to something else (255.255.255.255, for example)
#BROADCAST=127.255.255.255
ONBOOT=yes
#NAME=loopback


Debian/Ubuntu:
/etc/network/interfaces # maar EEN file voor meerdere NICs

-

Voorbeeld:
auto lo
iface lo inet loopback

auto eth0
iface eth0 inet static
	address 192.168.1.50
	netmask 255.255.255.0
	gateway 192.168.1.1

In RedHat:

dion@dionysos:/etc/sysconfig/network-scripts$ cat ifcfg-enp0s25 
DEVICE=enp0s25
BOOTPROTO=dhcp
ONBOOT=yes

cat /etc/sysconfig/network:
NETWORKING=yes
NETWORKING_IPV6=no
HOSTNAME=cbt-centos # raar, normaal in /etc/hostname

---

ifconfig

---

ifup

dion@dionysos:~$ sudo ifup enp0s25
Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/9)

---

ifdown

dion@dionysos:~$ sudo ifdown enp0s25

---

ifconfig

dion@dionysos:~$ ifconfig enp0s25
enp0s25: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 145.92.34.100  netmask 255.255.255.0  broadcast 145.92.34.255
        inet6 fe80::2e44:fdff:fe63:7989  prefixlen 64  scopeid 0x20<link>
        ether 2c:44:fd:63:79:89  txqueuelen 1000  (Ethernet)
        RX packets 323821  bytes 132030174 (125.9 MiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 173505  bytes 47077031 (44.8 MiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
        device interrupt 17  memory 0xd4700000-d4720000 

sudo ifconfig eth0 netmask 255.255.255.240 # not persistant
sudo ifconfig eth0 hw ether 00:11:22:33:44:55

---

dion@dionysos:~$ route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
^C
dion@dionysos:~$ ip route show
default via 145.92.34.254 dev enp0s25  proto static  metric 1024 
1.1.1.1 via 145.109.159.254 dev wlo1  proto static  metric 10 
145.92.34.0/24 dev enp0s25  proto kernel  scope link  src 145.92.34.100 
145.92.244.18 via 145.92.34.254 dev enp0s25  proto static  metric 1 
145.109.156.0/22 dev wlo1  proto kernel  scope link  src 145.109.157.231 
192.168.1.0/24 dev enp0s25  proto kernel  scope link  src 192.168.1.43 

---

route add default gw 192.168.1.1
ifconfig eth0 hw ether 












